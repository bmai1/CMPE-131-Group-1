<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Withdraw</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/withdraw.css') }}">
</head>
<body>
    <nav class="navbar">
        <ul>
            <li><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
            <li><a href="{{ url_for('deposit') }}">Deposit</a></li>
            <li><a href="{{ url_for('transfer') }}">Transfer</a></li>
            <li><a href="{{ url_for('withdraw') }}">Withdraw</a></li>
            <li><a href="{{ url_for('account_details') }}">Account Details</a></li>
            <li><a href="{{ url_for('index') }}">Logout</a></li>
        </ul>
    </nav>
    
    <!-- WITHDRAWAL SECTION -->
    <div class="container">
        <div class="content-box">
            <h2>Cash Withdrawal</h2>

            {% if message %}
                <p class="{{ 'success-message' if 'Successfully' in message else 'error-message' }}">
                    {{ message }}
                </p>
            {% endif %}

            <form method="post">
                <label for="account_id">Select Account:</label>
                <select id="account_id" name="account_id" required onchange="updateBalance()">
                    <option value="" disabled selected>Select an Account</option>
                    {% for account in accounts %}
                        <option value="{{ account.accountname }}" data-balance="{{ account.balance }}">
                            {{ account.accountname }} - ${{ account.balance }}
                        </option>
                    {% endfor %}
                </select> 
                <p>Available Balance: <strong id="balance-display">Select an account</strong></p>
                <input id="amount" name="amount" type="number" placeholder="Enter Amount to Withdraw" min="1" required>
                <input id="password" name="password" type="password" placeholder="Enter Password" required maxlength="20">
                <button type="submit">Withdraw</button>
            </form>
        </div>
    </div>
    <script>
        function updateBalance() {
            const accountSelect = document.getElementById("account_id");
            const balanceDisplay = document.getElementById("balance-display");
            const selectedOption = accountSelect.options[accountSelect.selectedIndex];

            if (selectedOption.value) {
                balanceDisplay.textContent = "$" + selectedOption.getAttribute("data-balance");
            } else {
                balanceDisplay.textContent = "Select an account";
            }
        }
    </script>
</body>
</html>